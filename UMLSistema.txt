@startuml
class Entidad{
 -nombre: String
 -localizacion: Localizacion
 -establecimientos: List<Establecimiento>
 -tipoEntidad : TipoEntidad
}

enum TipoEntidad{
    LINEA_SUBTERRANEO
    LINEA_FERROCARRIL
    ORGANIZACION
}


class Municipio{
 +nombre: String
 +id: int
 +departamento: Departamento
}

class Departamento{
 +nombre: String
 +id: int
 +provincia: Provincia
}

class Provincia{
 +nombre: String
 +id: int
}

class Establecimiento{
 -nombre: String
 -tipo: TipoEstablecimiento
 -localizacion: Localizacion
 -servicios: List<PrestacionServicio>
}

enum TipoEstablecimiento{
 ESTACION
 SUCURSAL
}

class Servicio{
    -descripcion: String
}



class Comunidad{
    -nombre: String
    -listaAdministradores: Administrador
    -listaMiembros: Miembro
    -incidentes: List<Incidente>

    +abrirIncidente(): void
    +cerrarIncidente(): void
}

class Administrador{
 -persona: Persona

}

class Miembro{
 -persona: Persona
}

class Designado{
    -usuario: Usuario
}


class Persona{
    -usuario: Usuario
    -localizacionesDeInteres: List<Localizacion>
    -serviciosDeInteres: List<Servicio>
    -entidadesDeInteres: List<Entidad>
    -notificador: Notificador
    -formaNotificacion: FormaNotificacion

    +notificarIncidente(Incidente, ...)
}

class PrestacionServicio{
    -servicio: Servicio
    -estado: EstadoServicio
}

enum EstadoServicio{
    DISPONIBLE
    NO_DISPONIBLE
    MANTENIMIENTO
}


class Usuario{
    -username: String
    -password: String
}

class Localizacion{
 provincia: Provincia
 departamento: Departamento
 municipio: Municipio
}

class PrestadoraDeServicio{
 -usuario: Usuario
 -designado: Designado
 -entidades: List<Entidad>
}

class OrganismoDeControl{
 -usuario: Usuario
 -designado: Designado
 -entidades: List<Entidad>
}

interface FormaNotificacion{
 +recibirIncidente(Incidente)
 +notificar(Incidente, ...)
}

class CuandoSuceden{
 -persona: Persona
 +recibirIncidente(Incidente): void
 +notificar(Incidente, ...): void
}

class SinApuros{
 -listaIncidentes: List<Incidente>
 -listaHorarios: List<LocalTime>
 -persona: Persona
 +filtrarIncidentes(): List<Incidente>
 +notificar(Incidente, ...)
}

class Incidente{
 +prestacionDeServicio: PrestacionDeServicio
 +establecimiento: Establecimiento
 +creador: Creador
 +fechaDeCreacion: date
 +fechaDeCierre: date
 +observaciones: String

 +abierto(): bool
}

class RepositorioSinApuros{
 +todosLosSinApuros: List<SinApuros>
}

interface Notificador{
 -enviar(Persona, notificacion): void
 -armarNotificacion(Incidente, ...) : notificacion
 +notificarIncidente(Incidente, ...) : void
}

class WhatsApp{

}

class Mail{

}

CuandoSuceden ..|> FormaNotificacion
CuandoSuceden -->"1" Persona

SinApuros ..|> FormaNotificacion
SinApuros -->"*" Incidente
SinApuros -->"1" Persona

WhatsApp ..|> Notificador

Mail ..|> Notificador

RepositorioSinApuros -->"*" SinApuros

Localizacion --> Provincia
Localizacion --> Departamento
Localizacion --> Municipio


Comunidad *--"*" Miembro
Comunidad *--"*" Administrador
Comunidad -->"*" Incidente

Miembro --> Persona
Administrador --> Persona

Persona --> Usuario
Persona -->"*" Localizacion
Persona -->"*" Servicio
Persona -->"*" Entidad
Persona -->"1" FormaNotificacion
Persona -->"1" Notificador

Entidad -->"1" Localizacion
Entidad -->"*" Establecimiento
Entidad --> TipoEntidad

Establecimiento --> TipoEstablecimiento
Establecimiento -->"1" Localizacion
Establecimiento -->"*" PrestacionServicio

PrestadoraDeServicio --> Usuario
PrestadoraDeServicio --> Designado
PrestadoraDeServicio -->"*" Entidad

OrganismoDeControl --> Usuario
OrganismoDeControl --> Designado
OrganismoDeControl -->"*" Entidad

Departamento --> Provincia
Municipio --> Departamento
Municipio --> Provincia

Designado --> Usuario

PrestacionServicio -->"1" EstadoServicio
PrestacionServicio -->"1" Servicio

@enduml